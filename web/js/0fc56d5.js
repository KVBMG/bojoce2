(function(){"use strict";function setup($){$.fn._fadeIn=$.fn.fadeIn;var noOp=$.noop||function(){};var msie=/MSIE/.test(navigator.userAgent);var ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var mode=document.documentMode||0;var setExpr=$.isFunction(document.createElement("div").style.setExpression);$.blockUI=function(opts){install(window,opts)};$.unblockUI=function(opts){remove(window,opts)};$.growlUI=function(title,message,timeout,onClose){var $m=$('<div class="growlUI"></div>');if(title)$m.append("<h1>"+title+"</h1>");if(message)$m.append("<h2>"+message+"</h2>");if(timeout===undefined)timeout=3e3;var callBlock=function(opts){opts=opts||{};$.blockUI({message:$m,fadeIn:typeof opts.fadeIn!=="undefined"?opts.fadeIn:700,fadeOut:typeof opts.fadeOut!=="undefined"?opts.fadeOut:1e3,timeout:typeof opts.timeout!=="undefined"?opts.timeout:timeout,centerY:false,showOverlay:false,onUnblock:onClose,css:$.blockUI.defaults.growlCSS})};callBlock();var nonmousedOpacity=$m.css("opacity");$m.mouseover(function(){callBlock({fadeIn:0,timeout:3e4});var displayBlock=$(".blockMsg");displayBlock.stop();displayBlock.fadeTo(300,1)}).mouseout(function(){$(".blockMsg").fadeOut(1e3)})};$.fn.block=function(opts){if(this[0]===window){$.blockUI(opts);return this}var fullOpts=$.extend({},$.blockUI.defaults,opts||{});this.each(function(){var $el=$(this);if(fullOpts.ignoreIfBlocked&&$el.data("blockUI.isBlocked"))return;$el.unblock({fadeOut:0})});return this.each(function(){if($.css(this,"position")=="static"){this.style.position="relative";$(this).data("blockUI.static",true)}this.style.zoom=1;install(this,opts)})};$.fn.unblock=function(opts){if(this[0]===window){$.unblockUI(opts);return this}return this.each(function(){remove(this,opts)})};$.blockUI.version=2.7;$.blockUI.defaults={message:"<h1>Attendez s'il vous plaît...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"40%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:2018,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:false};var pageBlock=null;var pageBlockEls=[];function install(el,opts){var css,themedCSS;var full=el==window;var msg=opts&&opts.message!==undefined?opts.message:undefined;opts=$.extend({},$.blockUI.defaults,opts||{});if(opts.ignoreIfBlocked&&$(el).data("blockUI.isBlocked"))return;opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});css=$.extend({},$.blockUI.defaults.css,opts.css||{});if(opts.onOverlayClick)opts.overlayCSS.cursor="pointer";themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock)remove(window,{fadeOut:0});if(msg&&typeof msg!="string"&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};$(el).data("blockUI.history",data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent)data.parent.removeChild(node)}$(el).data("blockUI.onUnblock",opts.onUnblock);var z=opts.baseZ;var lyr1,lyr2,lyr3,s;if(msie||opts.forceIframe)lyr1=$('<iframe class="blockUI" style="z-index:'+z+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>');else lyr1=$('<div class="blockUI" style="display:none"></div>');if(opts.theme)lyr2=$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+z+++';display:none"></div>');else lyr2=$('<div class="blockUI blockOverlay" style="z-index:'+z+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');if(opts.theme&&full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"}s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>"}else if(opts.theme){s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"}s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>"}else if(full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>'}else{s='<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>'}lyr3=$(s);if(msg){if(opts.theme){lyr3.css(themedCSS);lyr3.addClass("ui-widget-content")}else lyr3.css(css)}if(!opts.theme)lyr2.css(opts.overlayCSS);lyr2.css("position",full?"fixed":"absolute");if(msie||opts.forceIframe)lyr1.css("opacity",0);var layers=[lyr1,lyr2,lyr3],$par=full?$("body"):$(el);$.each(layers,function(){this.appendTo($par)});if(opts.theme&&opts.draggable&&$.fn.draggable){lyr3.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var expr=setExpr&&(!$.support.boxModel||$("object,embed",full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.support.boxModel)$("html,body").css("height","100%");if((ie6||!$.support.boxModel)&&!full){var t=sz(el,"borderTopWidth"),l=sz(el,"borderLeftWidth");var fixT=t?"(0 - "+t+")":0;var fixL=l?"(0 - "+l+")":0}$.each(layers,function(i,o){var s=o[0].style;s.position="absolute";if(i<2){if(full)s.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+opts.quirksmodeOffsetHack+') + "px"');else s.setExpression("height",'this.parentNode.offsetHeight + "px"');if(full)s.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"');else s.setExpression("width",'this.parentNode.offsetWidth + "px"');if(fixL)s.setExpression("left",fixL);if(fixT)s.setExpression("top",fixT)}else if(opts.centerY){if(full)s.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');s.marginTop=0}else if(!opts.centerY&&full){var top=opts.css&&opts.css.top?parseInt(opts.css.top,10):0;var expression="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+top+') + "px"';s.setExpression("top",expression)}})}if(msg){if(opts.theme)lyr3.find(".ui-widget-content").append(msg);else lyr3.append(msg);if(msg.jquery||msg.nodeType)$(msg).show()}if((msie||opts.forceIframe)&&opts.showOverlay)lyr1.show();if(opts.fadeIn){var cb=opts.onBlock?opts.onBlock:noOp;var cb1=opts.showOverlay&&!msg?cb:noOp;var cb2=msg?cb:noOp;if(opts.showOverlay)lyr2._fadeIn(opts.fadeIn,cb1);if(msg)lyr3._fadeIn(opts.fadeIn,cb2)}else{if(opts.showOverlay)lyr2.show();if(msg)lyr3.show();if(opts.onBlock)opts.onBlock.bind(lyr3)()}bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(opts.focusableElements,pageBlock);if(opts.focusInput)setTimeout(focus,20)}else center(lyr3[0],opts.centerX,opts.centerY);if(opts.timeout){var to=setTimeout(function(){if(full)$.unblockUI(opts);else $(el).unblock(opts)},opts.timeout);$(el).data("blockUI.timeout",to)}}function remove(el,opts){var count;var full=el==window;var $el=$(el);var data=$el.data("blockUI.history");var to=$el.data("blockUI.timeout");if(to){clearTimeout(to);$el.removeData("blockUI.timeout")}opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);if(opts.onUnblock===null){opts.onUnblock=$el.data("blockUI.onUnblock");$el.removeData("blockUI.onUnblock")}var els;if(full)els=$("body").children().filter(".blockUI").add("body > .blockUI");else els=$el.find(">.blockUI");if(opts.cursorReset){if(els.length>1)els[1].style.cursor=opts.cursorReset;if(els.length>2)els[2].style.cursor=opts.cursorReset}if(full)pageBlock=pageBlockEls=null;if(opts.fadeOut){count=els.length;els.stop().fadeOut(opts.fadeOut,function(){if(--count===0)reset(els,data,opts,el)})}else reset(els,data,opts,el)}function reset(els,data,opts,el){var $el=$(el);if($el.data("blockUI.isBlocked"))return;els.each(function(i,o){if(this.parentNode)this.parentNode.removeChild(this)});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;data.el.style.cursor="default";if(data.parent)data.parent.appendChild(data.el);$el.removeData("blockUI.history")}if($el.data("blockUI.static")){$el.css("position","static")}if(typeof opts.onUnblock=="function")opts.onUnblock(el,opts);var body=$(document.body),w=body.width(),cssW=body[0].style.width;body.width(w-1).width(w);body[0].style.width=cssW}function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data("blockUI.isBlocked")))return;$el.data("blockUI.isBlocked",b);if(!full||!opts.bindEvents||b&&!opts.showOverlay)return;var events="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(b)$(document).bind(events,opts,handler);else $(document).unbind(events,handler)}function handler(e){if(e.type==="keydown"&&e.keyCode&&e.keyCode==9){if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&e.target===els[els.length-1];var back=e.shiftKey&&e.target===els[0];if(fwd||back){setTimeout(function(){focus(back)},10);return false}}}var opts=e.data;var target=$(e.target);if(target.hasClass("blockOverlay")&&opts.onOverlayClick)opts.onOverlayClick(e);if(target.parents("div."+opts.blockMsgClass).length>0)return true;return target.parents().children().filter("div.blockUI").length===0}function focus(back){if(!pageBlockEls)return;var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e)e.focus()}function center(el,x,y){var p=el.parentNode,s=el.style;var l=(p.offsetWidth-el.offsetWidth)/2-sz(p,"borderLeftWidth");var t=(p.offsetHeight-el.offsetHeight)/2-sz(p,"borderTopWidth");if(x)s.left=l>0?l+"px":"0";if(y)s.top=t>0?t+"px":"0"}function sz(el,p){return parseInt($.css(el,p),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],setup)}else{setup(jQuery)}})();
(function($){$.extend({debounce:function(fn,timeout,invokeAsap,ctx){if(arguments.length==3&&typeof invokeAsap!="boolean"){ctx=invokeAsap;invokeAsap=false}var timer;return function(){var args=arguments;ctx=ctx||this;invokeAsap&&!timer&&fn.apply(ctx,args);clearTimeout(timer);timer=setTimeout(function(){invokeAsap||fn.apply(ctx,args);timer=null},timeout)}},throttle:function(fn,timeout,ctx){var timer,args,needInvoke;return function(){args=arguments;needInvoke=true;ctx=ctx||this;timer||function(){if(needInvoke){fn.apply(ctx,args);needInvoke=false;timer=setTimeout(arguments.callee,timeout)}else{timer=null}}()}}})})(jQuery);
$(function(){var is_processing=false;var last_page=false;var add_more=false;var blockableElement=null;var xhr=null;var last_phrases="";var first=true;var options={target:"#offreList",beforeSubmit:showRequest,success:showResponse,url:Routing.generate("eco_job_anonymous_offre_search_ajax_templated"),type:"post",dataType:"json"};$("#searchForm").submit(function(){$("#searchForm").ajaxSubmit(options);return false});$("#searchBar").keyup($.debounce(flushSearch,500));function flushSearch(){var val=$("#searchBar").val();if(val.length>=3||val.length==0&&last_phrases!=val){console.log(val.slice(-1)!=" ");xhr=performSearch();last_phrases=this.value}}$("#datePublication").on("change",function(){xhr=performSearch()});$("#secteur").on("change",function(){xhr=performSearch()});$("#contrat").on("change",function(){xhr=performSearch()});$("#reset").click(function(e){e.preventDefault();resetForm();resetDetails()});function resetDiv(){$("#offreList").children().remove();$("#offreList").empty()}function resetDetails(){$("#details").children().remove();$("#details").empty()}function showRequest(formData,jqForm,options){}function showResponse(responseText,statusText,xhr,$form){if(xhr.status==200){console.log("response");console.log(responseText.responseJSON);if(!add_more){resetDetails();if(responseText.total>0){resetDiv();$("#offreList").append("<div class='title6'>Résultats </div> <br> Total: "+responseText.total);$("#offreList").append(responseText.html)}else{if(!first){var html="<div class='news1'><div class='txt2'>Aucune offre d'emploi trouvée</div><div class='txt3'></div></div>";resetDiv();$("#offreList").append(html)}}$("#offreList").on("scroll",$.debounce(addMore,500))}else{$(".loader").remove();$("#offreList").unblock();if(responseText.total>0){$("#offreList").append(responseText.html);$("#offreList").on("scroll",$.debounce(addMore,500))}else{console.log("last_page");console.log(responseText);last_page=true;$("#offreList").append("Fin de la correspondance")}}}else $("#offreList").append("Echec de la connexion au serveur");loadCards();loadNetworks()}$(document).on("show.bs.collapse",".collapse",function(){IN.parse()});$(document).on("click",".save",function(){$("#globModal").modal("show")});$("#limit").on("change",function(){xhr=performSearch()});function resetForm(){$("#offreList").append("<div class='loader'></div>");$("#datePublication").val("-1");$("#contrat").val("0");$("#secteur").val("0");$("#searchBar").val("");$("#limit").val("10");xhr=performSearch()}function performSearch(){last_page=false;$(".loader").remove();$("#offreList").children().remove();$("#offreList").append("<div class='loader'></div>");add_more=false;is_processing=false;first=false;$("#offset").val(0);if(xhr!=null)xhr.abort();var form=$("#searchForm").submit();xhr=form.data("jqxhr")}function showOffre(id){$.ajax({url:Routing.generate("eco_job_anonymous_offre_details",{id:id}),type:"GET",dataType:"json",contentType:"application/json",beforeSend:function(){resetDetails();$("#details").block({message:"<div class='loader'></div>",css:{border:"none",backgroundColor:"transparent",width:"66px"}})},contentType:false,statusCode:{200:function(response){resetDetails();$("#details").append(response.html);console.log(response)},412:function(response){resetDetails();$("#details").append("Echec de la connexion au serveur")},500:function(response){resetDetails();$("#details").append("Echec de la connexion au serveur")},complete:function(){$("#details").unblock()}}})}$(document).on("click",".offre:not(.offre>.cd-add-to-cart)",function(){showOffre($(this).attr("offreId"))});$("#offreList").scroll($.debounce(addMore,500));$(document).on("click",".save",function(){$("#globModal").modal("show")});function addMore(){if($(this).scrollTop()+$(this).innerHeight()==$(this)[0].scrollHeight){if(!(is_processing&&last_page)){$(".loader").remove();$("#offreList").off("scroll");$("#offreList").append("<div class='loader'></div>").scrollTop($(this)[0].scrollHeight);first=false;add_more=true;is_processing=true;var currOffset=parseInt($("#offset").val());var limit=parseInt($("#limit").val());$("#offset").val(currOffset+limit);if(xhr!=null)xhr.abort();var form=$("#searchForm").submit();xhr=form.data("jqxhr")}}}function loadCards(){var cartWrapper=$(".cd-cart-container");var productId=0;if(cartWrapper.length>0){var cartBody=cartWrapper.find(".body");var cartList=cartBody.find("ul").eq(0);var cartTotal=cartWrapper.find(".checkout").find("span");var cartTrigger=cartWrapper.children(".cd-cart-trigger");var cartCount=cartTrigger.children(".count");var addToCartBtn=$(".cd-add-to-cart");var undo=cartWrapper.find(".undo");var undoTimeoutId;addToCartBtn.on("click",function(event){event.preventDefault();addToCart($(this));animate($(this))});cartTrigger.on("click",function(event){event.preventDefault();toggleCart(true)});cartWrapper.on("click",function(event){if($(event.target).is($(this)))toggleCart(true)});cartList.on("click",".delete-item",function(event){event.preventDefault();removeProduct($(event.target).parents(".product"))});cartList.on("change","select",function(event){quickUpdateCart()});undo.on("click","a",function(event){clearInterval(undoTimeoutId);event.preventDefault();cartList.find(".deleted").addClass("undo-deleted").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){$(this).off("webkitAnimationEnd oanimationend msAnimationEnd animationend").removeClass("deleted undo-deleted").removeAttr("style");quickUpdateCart()});undo.removeClass("visible")})}function toggleCart(bool){var cartIsOpen=typeof bool==="undefined"?cartWrapper.hasClass("cart-open"):bool;if(cartIsOpen){cartWrapper.removeClass("cart-open");clearInterval(undoTimeoutId);undo.removeClass("visible");cartList.find(".deleted").remove();setTimeout(function(){cartBody.scrollTop(0);cartWrapper.addClass("empty")},500)}else{cartWrapper.addClass("cart-open")}}function addToCart(trigger){var cartIsEmpty=cartWrapper.hasClass("empty");var _offreId=trigger.data("offre-id");addProduct(cartIsEmpty,_offreId).complete(function(){cartWrapper.removeClass("empty");trigger.replaceWith('<a href="#" class="btn-default btn-warning">Déja sauvegardée</a>');toggleCart(true)})}function animate(trigger){var imgtodrag=trigger;if(imgtodrag){var imgclone=imgtodrag.clone().offset({top:imgtodrag.offset().top,left:imgtodrag.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"100"}).appendTo($("body")).animate({top:cartTrigger.offset().top-150,left:cartTrigger.offset().left,width:75,height:75},3e3,"easeInOutExpo");setTimeout(function(){cartTrigger.effect("shake",{times:2},200)},1500);imgclone.animate({width:0,height:0},function(){$(this).detach()})}else{alert("not defined")}}function addProduct(cartIsEmpty,id){var xhr=$.ajax({url:Routing.generate("eco_job_candidat_offre_save_async",{id:id}),method:"GET"}).success(function(data){updateCartCount(cartIsEmpty,data.saved)}).error(function(err){console.warn(err)});return xhr}function removeProduct(product){clearInterval(undoTimeoutId);cartList.find(".deleted").remove();var topPosition=product.offset().top-cartBody.children("ul").offset().top,productQuantity=Number(product.find(".quantity").find("select").val()),productTotPrice=Number(product.find(".price").text().replace("$",""))*productQuantity;product.css("top",topPosition+"px").addClass("deleted");updateCartCount(true,-productQuantity);undo.addClass("visible");undoTimeoutId=setTimeout(function(){undo.removeClass("visible");cartList.find(".deleted").remove()},8e3)}function quickUpdateCart(){var quantity=0;var price=0;cartList.children("li:not(.deleted)").each(function(){var singleQuantity=Number($(this).find("select").val());quantity=quantity+singleQuantity;price=price+singleQuantity*Number($(this).find(".price").text().replace("$",""))});cartTotal.text(price.toFixed(2));cartCount.find("li").eq(0).text(quantity);cartCount.find("li").eq(1).text(quantity+1)}function updateCartCount(emptyCart,quantity){cartCount.find("li").eq(0).text(quantity);cartCount.find("li").eq(1).text(quantity)}}function loadNetworks(){var _url=window.location.href;window.fbAsyncInit=function(){FB.init({appId:"1750551898578027",xfbml:true,version:"v2.10"});FB.AppEvents.logPageView()};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk");$(".fb-share").click(function(e){e.preventDefault();var url="ecojob.fr/valfid/developpement/web"+$(this).attr("href");FB.ui({method:"share",display:"popup",href:url},function(response){});return false});$(".popup").click(function(event){var width=575,height=400,left=($(window).width()-width)/2,top=($(window).height()-height)/2,url=this.href,opts="status=1"+",width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"twitter",opts);return false});$("#candidatureForm").submit(function(event){event.preventDefault();var form_data=$(this).serialize();console.log(form_data);$.ajax({type:"POST",url:$(this).attr("action"),data:form_data,beforeSend:function(){$.blockUI({message:'<p class="loader"></p>',css:{border:"none",backgroundColor:"transparent",width:"66px",top:($(window).height()-100)/2+"px",left:($(window).width()-100)/2+"px"}})},error:function(err){$("#responseStore").addClass("alert-danger").html("L'envoie de votre candidature a échoué").show()},success:function(data){$("#responseStore").addClass("alert-success").html(data.message).show();$("#postulerBtn").replaceWith('<a href="#" class="btn-default btn-warning">Déja postulé</a>');$("#m-m-u").modal("hide")},complete:function(){$.unblockUI()}})})}});
$(function(){var _url=window.location.href;window.fbAsyncInit=function(){FB.init({appId:"1750551898578027",xfbml:true,version:"v2.10"});FB.AppEvents.logPageView()};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk");$(".fb-share").click(function(e){e.preventDefault();var url="ecojob.fr/valfid/developpement/web"+$(this).attr("href");FB.ui({method:"share",display:"popup",href:url},function(response){});return false});$(".popup").click(function(event){var width=575,height=400,left=($(window).width()-width)/2,top=($(window).height()-height)/2,url=this.href,opts="status=1"+",width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"twitter",opts);return false});$("#candidatureForm").submit(function(event){event.preventDefault();var form_data=$(this).serialize();console.log(form_data);$.ajax({type:"POST",url:$(this).attr("action"),data:form_data,beforeSend:function(){$.blockUI({message:'<p class="loader"></p>',css:{border:"none",backgroundColor:"transparent",width:"66px",top:($(window).height()-100)/2+"px",left:($(window).width()-100)/2+"px"}})},error:function(err){$("#responseStore").addClass("alert-danger").html("L'envoie de votre candidature a échoué").show()},success:function(data){$("#responseStore").addClass("alert-success").html(data.message).show();$("#postulerBtn").replaceWith('<a href="#" class="btn-default btn-warning">Déja postulé</a>');$("#m-m-u").modal("hide")},complete:function(){$.unblockUI()}})})});
jQuery(document).ready(function($){var cartWrapper=$(".cd-cart-container");var productId=0;if(cartWrapper.length>0){var cartBody=cartWrapper.find(".body");var cartList=cartBody.find("ul").eq(0);var cartTotal=cartWrapper.find(".checkout").find("span");var cartTrigger=cartWrapper.children(".cd-cart-trigger");var cartCount=cartTrigger.children(".count");var addToCartBtn=$(".cd-add-to-cart");var undo=cartWrapper.find(".undo");var undoTimeoutId;$(document).on("click",".cd-add-to-cart",function(event){event.preventDefault();addToCart($(this));animate($(this))});cartTrigger.on("click",function(event){event.preventDefault();toggleCart(true)});cartWrapper.on("click",function(event){if($(event.target).is($(this)))toggleCart(true)});cartList.on("click",".delete-item",function(event){event.preventDefault();removeProduct($(event.target).parents(".product"))});cartList.on("change","select",function(event){quickUpdateCart()});undo.on("click","a",function(event){clearInterval(undoTimeoutId);event.preventDefault();cartList.find(".deleted").addClass("undo-deleted").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){$(this).off("webkitAnimationEnd oanimationend msAnimationEnd animationend").removeClass("deleted undo-deleted").removeAttr("style");quickUpdateCart()});undo.removeClass("visible")})}function toggleCart(bool){var cartIsOpen=typeof bool==="undefined"?cartWrapper.hasClass("cart-open"):bool;if(cartIsOpen){cartWrapper.removeClass("cart-open");clearInterval(undoTimeoutId);undo.removeClass("visible");cartList.find(".deleted").remove();setTimeout(function(){cartBody.scrollTop(0);cartWrapper.addClass("empty")},500)}else{cartWrapper.addClass("cart-open")}}function addToCart(trigger){var cartIsEmpty=cartWrapper.hasClass("empty");var _offreId=trigger.data("offre-id");addProduct(cartIsEmpty,_offreId).complete(function(){cartWrapper.removeClass("empty");toggleCart(true)})}function animate(trigger){var imgtodrag=trigger;if(imgtodrag){var imgclone=imgtodrag.clone().offset({top:imgtodrag.offset().top,left:imgtodrag.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"100"}).appendTo($("body")).animate({top:cartTrigger.offset().top-150,left:cartTrigger.offset().left,width:75,height:75},3e3,"easeInOutExpo");imgclone.animate({width:0,height:0},function(){$(this).detach()})}else{alert("not defined")}}function addProduct(cartIsEmpty,id){var xhr=$.ajax({url:Routing.generate("eco_job_candidat_offre_save_async",{id:id}),method:"GET"}).success(function(data){$(".cd-add-to-cart[data-offre-id="+id+"]").replaceWith('<a href="#" class="btn-default btn-warning">Déja sauvegardée</a>');updateCartCount(cartIsEmpty,data.saved)}).error(function(err){console.warn(err)});return xhr}function removeProduct(product){clearInterval(undoTimeoutId);cartList.find(".deleted").remove();var topPosition=product.offset().top-cartBody.children("ul").offset().top,productQuantity=Number(product.find(".quantity").find("select").val()),productTotPrice=Number(product.find(".price").text().replace("$",""))*productQuantity;product.css("top",topPosition+"px").addClass("deleted");updateCartCount(true,-productQuantity);undo.addClass("visible");undoTimeoutId=setTimeout(function(){undo.removeClass("visible");cartList.find(".deleted").remove()},8e3)}function quickUpdateCart(){var quantity=0;var price=0;cartList.children("li:not(.deleted)").each(function(){var singleQuantity=Number($(this).find("select").val());quantity=quantity+singleQuantity;price=price+singleQuantity*Number($(this).find(".price").text().replace("$",""))});cartTotal.text(price.toFixed(2));cartCount.find("li").eq(0).text(quantity);cartCount.find("li").eq(1).text(quantity+1)}function updateCartCount(emptyCart,quantity){cartCount.find("li").eq(0).text(quantity);cartCount.find("li").eq(1).text(quantity)}});
jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return t==0?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=1.525)+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<1/2.75){return c*(7.5625*t*t)+b}else if(t<2/2.75){return c*(7.5625*(t-=1.5/2.75)*t+.75)+b}else if(t<2.5/2.75){return c*(7.5625*(t-=2.25/2.75)*t+.9375)+b}else{return c*(7.5625*(t-=2.625/2.75)*t+.984375)+b}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b}});
$(function(){$(document).on("submit","#candidatureForm",function(event){event.preventDefault();var form_data=$(this).serialize();console.log(form_data);$.ajax({type:"POST",url:$(this).attr("action"),data:form_data,beforeSend:function(){$.blockUI({message:'<p class="loader"></p>',css:{border:"none",backgroundColor:"transparent",width:"66px",top:($(window).height()-100)/2+"px",left:($(window).width()-100)/2+"px"}})},error:function(err){$("#responseStore").addClass("alert-danger").html("L'envoie de votre candidature a échoué").show()},success:function(data){$("#responseStore").addClass("alert-success").html(data.message).show();$("#postulerBtn").replaceWith('<a href="#" class="btn-default btn-warning">Déja postulé</a>');$("#m-m-u").modal("hide")},complete:function(){$.unblockUI()}})})});
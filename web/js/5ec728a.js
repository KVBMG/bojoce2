(function(){"use strict";function setup($){$.fn._fadeIn=$.fn.fadeIn;var noOp=$.noop||function(){};var msie=/MSIE/.test(navigator.userAgent);var ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var mode=document.documentMode||0;var setExpr=$.isFunction(document.createElement("div").style.setExpression);$.blockUI=function(opts){install(window,opts)};$.unblockUI=function(opts){remove(window,opts)};$.growlUI=function(title,message,timeout,onClose){var $m=$('<div class="growlUI"></div>');if(title)$m.append("<h1>"+title+"</h1>");if(message)$m.append("<h2>"+message+"</h2>");if(timeout===undefined)timeout=3e3;var callBlock=function(opts){opts=opts||{};$.blockUI({message:$m,fadeIn:typeof opts.fadeIn!=="undefined"?opts.fadeIn:700,fadeOut:typeof opts.fadeOut!=="undefined"?opts.fadeOut:1e3,timeout:typeof opts.timeout!=="undefined"?opts.timeout:timeout,centerY:false,showOverlay:false,onUnblock:onClose,css:$.blockUI.defaults.growlCSS})};callBlock();var nonmousedOpacity=$m.css("opacity");$m.mouseover(function(){callBlock({fadeIn:0,timeout:3e4});var displayBlock=$(".blockMsg");displayBlock.stop();displayBlock.fadeTo(300,1)}).mouseout(function(){$(".blockMsg").fadeOut(1e3)})};$.fn.block=function(opts){if(this[0]===window){$.blockUI(opts);return this}var fullOpts=$.extend({},$.blockUI.defaults,opts||{});this.each(function(){var $el=$(this);if(fullOpts.ignoreIfBlocked&&$el.data("blockUI.isBlocked"))return;$el.unblock({fadeOut:0})});return this.each(function(){if($.css(this,"position")=="static"){this.style.position="relative";$(this).data("blockUI.static",true)}this.style.zoom=1;install(this,opts)})};$.fn.unblock=function(opts){if(this[0]===window){$.unblockUI(opts);return this}return this.each(function(){remove(this,opts)})};$.blockUI.version=2.7;$.blockUI.defaults={message:"<h1>Attendez s'il vous plaît...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"40%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:2018,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:false};var pageBlock=null;var pageBlockEls=[];function install(el,opts){var css,themedCSS;var full=el==window;var msg=opts&&opts.message!==undefined?opts.message:undefined;opts=$.extend({},$.blockUI.defaults,opts||{});if(opts.ignoreIfBlocked&&$(el).data("blockUI.isBlocked"))return;opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});css=$.extend({},$.blockUI.defaults.css,opts.css||{});if(opts.onOverlayClick)opts.overlayCSS.cursor="pointer";themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock)remove(window,{fadeOut:0});if(msg&&typeof msg!="string"&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};$(el).data("blockUI.history",data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent)data.parent.removeChild(node)}$(el).data("blockUI.onUnblock",opts.onUnblock);var z=opts.baseZ;var lyr1,lyr2,lyr3,s;if(msie||opts.forceIframe)lyr1=$('<iframe class="blockUI" style="z-index:'+z+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>');else lyr1=$('<div class="blockUI" style="display:none"></div>');if(opts.theme)lyr2=$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+z+++';display:none"></div>');else lyr2=$('<div class="blockUI blockOverlay" style="z-index:'+z+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');if(opts.theme&&full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"}s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>"}else if(opts.theme){s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"</div>"}s+='<div class="ui-widget-content ui-dialog-content"></div>';s+="</div>"}else if(full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>'}else{s='<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>'}lyr3=$(s);if(msg){if(opts.theme){lyr3.css(themedCSS);lyr3.addClass("ui-widget-content")}else lyr3.css(css)}if(!opts.theme)lyr2.css(opts.overlayCSS);lyr2.css("position",full?"fixed":"absolute");if(msie||opts.forceIframe)lyr1.css("opacity",0);var layers=[lyr1,lyr2,lyr3],$par=full?$("body"):$(el);$.each(layers,function(){this.appendTo($par)});if(opts.theme&&opts.draggable&&$.fn.draggable){lyr3.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var expr=setExpr&&(!$.support.boxModel||$("object,embed",full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.support.boxModel)$("html,body").css("height","100%");if((ie6||!$.support.boxModel)&&!full){var t=sz(el,"borderTopWidth"),l=sz(el,"borderLeftWidth");var fixT=t?"(0 - "+t+")":0;var fixL=l?"(0 - "+l+")":0}$.each(layers,function(i,o){var s=o[0].style;s.position="absolute";if(i<2){if(full)s.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+opts.quirksmodeOffsetHack+') + "px"');else s.setExpression("height",'this.parentNode.offsetHeight + "px"');if(full)s.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"');else s.setExpression("width",'this.parentNode.offsetWidth + "px"');if(fixL)s.setExpression("left",fixL);if(fixT)s.setExpression("top",fixT)}else if(opts.centerY){if(full)s.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');s.marginTop=0}else if(!opts.centerY&&full){var top=opts.css&&opts.css.top?parseInt(opts.css.top,10):0;var expression="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+top+') + "px"';s.setExpression("top",expression)}})}if(msg){if(opts.theme)lyr3.find(".ui-widget-content").append(msg);else lyr3.append(msg);if(msg.jquery||msg.nodeType)$(msg).show()}if((msie||opts.forceIframe)&&opts.showOverlay)lyr1.show();if(opts.fadeIn){var cb=opts.onBlock?opts.onBlock:noOp;var cb1=opts.showOverlay&&!msg?cb:noOp;var cb2=msg?cb:noOp;if(opts.showOverlay)lyr2._fadeIn(opts.fadeIn,cb1);if(msg)lyr3._fadeIn(opts.fadeIn,cb2)}else{if(opts.showOverlay)lyr2.show();if(msg)lyr3.show();if(opts.onBlock)opts.onBlock.bind(lyr3)()}bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(opts.focusableElements,pageBlock);if(opts.focusInput)setTimeout(focus,20)}else center(lyr3[0],opts.centerX,opts.centerY);if(opts.timeout){var to=setTimeout(function(){if(full)$.unblockUI(opts);else $(el).unblock(opts)},opts.timeout);$(el).data("blockUI.timeout",to)}}function remove(el,opts){var count;var full=el==window;var $el=$(el);var data=$el.data("blockUI.history");var to=$el.data("blockUI.timeout");if(to){clearTimeout(to);$el.removeData("blockUI.timeout")}opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);if(opts.onUnblock===null){opts.onUnblock=$el.data("blockUI.onUnblock");$el.removeData("blockUI.onUnblock")}var els;if(full)els=$("body").children().filter(".blockUI").add("body > .blockUI");else els=$el.find(">.blockUI");if(opts.cursorReset){if(els.length>1)els[1].style.cursor=opts.cursorReset;if(els.length>2)els[2].style.cursor=opts.cursorReset}if(full)pageBlock=pageBlockEls=null;if(opts.fadeOut){count=els.length;els.stop().fadeOut(opts.fadeOut,function(){if(--count===0)reset(els,data,opts,el)})}else reset(els,data,opts,el)}function reset(els,data,opts,el){var $el=$(el);if($el.data("blockUI.isBlocked"))return;els.each(function(i,o){if(this.parentNode)this.parentNode.removeChild(this)});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;data.el.style.cursor="default";if(data.parent)data.parent.appendChild(data.el);$el.removeData("blockUI.history")}if($el.data("blockUI.static")){$el.css("position","static")}if(typeof opts.onUnblock=="function")opts.onUnblock(el,opts);var body=$(document.body),w=body.width(),cssW=body[0].style.width;body.width(w-1).width(w);body[0].style.width=cssW}function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data("blockUI.isBlocked")))return;$el.data("blockUI.isBlocked",b);if(!full||!opts.bindEvents||b&&!opts.showOverlay)return;var events="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(b)$(document).bind(events,opts,handler);else $(document).unbind(events,handler)}function handler(e){if(e.type==="keydown"&&e.keyCode&&e.keyCode==9){if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&e.target===els[els.length-1];var back=e.shiftKey&&e.target===els[0];if(fwd||back){setTimeout(function(){focus(back)},10);return false}}}var opts=e.data;var target=$(e.target);if(target.hasClass("blockOverlay")&&opts.onOverlayClick)opts.onOverlayClick(e);if(target.parents("div."+opts.blockMsgClass).length>0)return true;return target.parents().children().filter("div.blockUI").length===0}function focus(back){if(!pageBlockEls)return;var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e)e.focus()}function center(el,x,y){var p=el.parentNode,s=el.style;var l=(p.offsetWidth-el.offsetWidth)/2-sz(p,"borderLeftWidth");var t=(p.offsetHeight-el.offsetHeight)/2-sz(p,"borderTopWidth");if(x)s.left=l>0?l+"px":"0";if(y)s.top=t>0?t+"px":"0"}function sz(el,p){return parseInt($.css(el,p),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],setup)}else{setup(jQuery)}})();
(function($){$.extend({debounce:function(fn,timeout,invokeAsap,ctx){if(arguments.length==3&&typeof invokeAsap!="boolean"){ctx=invokeAsap;invokeAsap=false}var timer;return function(){var args=arguments;ctx=ctx||this;invokeAsap&&!timer&&fn.apply(ctx,args);clearTimeout(timer);timer=setTimeout(function(){invokeAsap||fn.apply(ctx,args);timer=null},timeout)}},throttle:function(fn,timeout,ctx){var timer,args,needInvoke;return function(){args=arguments;needInvoke=true;ctx=ctx||this;timer||function(){if(needInvoke){fn.apply(ctx,args);needInvoke=false;timer=setTimeout(arguments.callee,timeout)}else{timer=null}}()}}})})(jQuery);
$(function(){var locations=[];firstTime();var map;var markers=[];var infowindow;var markerCluster;var currentRequest=null;var xhr=null;var blockableElement=null;var perform=false;var last_phrases="";var is_processing=false;var last_page=false;var add_more=false;var first=true;var show_offre=true;function fillMap(){var marker,i;for(i=0;i<locations.length;i++){marker=new google.maps.Marker({position:new google.maps.LatLng(locations[i].latitude,locations[i].longitude),map:map,scaledSize:new google.maps.Size(22,32),icon:assetsBaseDir+"m2m.png"});attachSecretMessage(marker,locations[i]);markers.push(marker)}markerCluster=new MarkerClusterer(map,markers,{imagePath:assetsBaseDir+"m"})}function attachSecretMessage(marker,secretMessage){marker.addListener("click",function(){showOffre(secretMessage.id)})}function firstTime(){infowindow=new google.maps.InfoWindow;$.ajax({url:Routing.generate("eco_job_anonymous_offre_search_ajax_templated"),type:"GET",contentType:"application/json",contentType:false,success:function(response){response=$.parseJSON(response.objects);locations=response},error:function(){alert("Echec lors de la connexion au serveur. Veuillez réessayer ou contacter l'administrateur")}}).done(function(response){initialize()})}function initialize(){var mapOptions={center:new google.maps.LatLng(46.9,1.56),zoom:6,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},gestureHandling:"greedy",styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#01a2a6"},{visibility:"on"}]}]};map=new google.maps.Map(document.getElementById("google_map"),mapOptions);fillMap()}function removeMarkers(){for(var i=0;i<markers.length;i++){markers[i].setMap(null)}markers.length=0;markerCluster.clearMarkers()}function showOffre(id){$.ajax({url:Routing.generate("eco_job_anonymous_offre_details",{id:id}),type:"GET",dataType:"json",contentType:"application/json",beforeSend:function(){resetDiv();$("#details").append("<div class='loader'></div>")},beforeSend:function(){if(blockableElement==null)blockableElement=$("#google_map").block({message:"<div class='loader'></div>",css:{border:"none",backgroundColor:"transparent",width:"66px"}});else{if(!blockableElement.data("blockUI.isBlocked"))blockableElement=$("#google_map").block({message:"<div class='loader'></div>",css:{border:"none",backgroundColor:"transparent",width:"66px"}})}if(xhr!=null)xhr.abort()},contentType:false,statusCode:{200:function(response){resetDiv();$("#details").append(response.html);var marker=new google.maps.Marker({position:new google.maps.LatLng(response.lat,response.long),map:map,scaledSize:new google.maps.Size(22,32),icon:assetsBaseDir+"m2m.png"});map.setZoom(17);map.panTo(new google.maps.LatLng(response.lat,response.long));google.maps.event.addListener(marker,"click",function(){return function(){infowindow.setContent(response.titre);showOffre(response.id)}})},412:function(response){resetDiv();$("#details").append("Echec de la connexion au serveur")},500:function(response){resetDiv();$("#details").append("Echec de la connexion au serveur")}},complete:function(){$("#google_map").unblock()}})}$(document).on("click",".offre",function(){showOffre($(this).attr("offreId"));show_offre=true});$(document).on("click",".save",function(){$("#globModal").modal("show")});function getOffres(){$.ajax({url:Routing.generate("eco_job_anonymous_offres_json"),type:"GET",contentType:"application/json",contentType:false,success:function(response){response=$.parseJSON(response);locations=response},error:function(){alert("Echec lors de la connexion au serveur. Veuillez réessayer ou contacter l'administrateur")}})}function resetDiv(){$("#details").children().remove();$("#details").empty()}function resetList(){$("#offreList").children().remove();$("#offreList").empty()}var options={target:"#details",async:false,cache:false,beforeSubmit:showRequest,success:showResponse,url:Routing.generate("eco_job_anonymous_offre_search_ajax_templated"),type:"post",dataType:"json"};$("#searchForm").submit(function(){$("#searchForm").ajaxSubmit(options);return false});$("#searchBar").keyup($.debounce(flushSearch,500));function flushSearch(){var val=$("#searchBar").val();if(val.length>=3||val.length==0&&last_phrases!=val){currentRequest=performSearch();last_phrases=this.value}}$("#datePublication").on("change",function(){currentRequest=performSearch()});$("#secteur").on("change",function(){currentRequest=performSearch()});$("#contrat").on("change",function(){currentRequest=performSearch()});$("#limit").on("change",function(){currentRequest=performSearch()});$("#reset").click(function(e){e.preventDefault();resetDiv();removeMarkers();locations=[];var mapOptions={center:new google.maps.LatLng(46.9,1.56),zoom:6,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:true,gestureHandling:"greedy",zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#01a2a6"},{visibility:"on"}]}]};map=new google.maps.Map(document.getElementById("google_map"),mapOptions);markerCluster=new MarkerClusterer(map,markers,{imagePath:"../../../images/m"});resetForm()});function showRequest(formData,jqForm,options){perform=true}function showResponse(responseText,statusText,xhr,$form){var resultats=$.parseJSON(responseText.objects);xhr=null;perform=false;if(!show_offre)removeMarkers();if(add_more){console.log(locations);if(resultats.length>0){for(var i=0;i<resultats.length;i++){locations.push(resultats[i])}}console.log(locations)}else{locations=[];locations=resultats;resetList();resetDiv()}fillMap();$("#google_map").unblock();if(!add_more){resetDiv();if(responseText.total>0){resetDiv();$("#offreList").append("<div class='title6'>Résultats </div> <br> Total: "+responseText.total);$("#offreList").append(responseText.html)}else{if(!first){var html="<div class='news1'><div class='txt2'>Aucune offre d'emploi trouvée</div><div class='txt3'></div></div>";resetDiv();$("#offreList").append(html)}}$("#offreList").on("scroll",$.debounce(addMore,500))}else{$(".loader").remove();$("#offreList").unblock();if(responseText.total>0){$("#offreList").append(responseText.html);$("#offreList").on("scroll",$.debounce(addMore,500))}else{console.log("last_page");console.log(responseText);last_page=true;$("#offreList").append("Fin de la correspondance")}}loadCards();loadNetworks();IN.parse()}function resetForm(){$("#datePublication").val("-1");$("#contrat").val("0");$("#secteur").val("0");$("#searchBar").val("");$("#limit").val("10");xhr=performSearch();currentRequest=performSearch()}function performSearch(){$("#offreList").children().remove().append("<div class='loader'></div>");$("#offreList").append("<div class='loader'></div>");add_more=false;is_processing=false;last_page=false;show_offre=false;first=false;$("#offset").val(0);$("#offreList").scrollTop(0);if(blockableElement==null)blockableElement=$("#google_map").block({message:"<div class='loader'></div>",css:{border:"none",backgroundColor:"transparent",width:"66px"}});else{if(!blockableElement.data("blockUI.isBlocked"))blockableElement=$("#google_map").block({message:"<div class='loader'></div>",css:{border:"none",backgroundColor:"transparent",width:"66px"}})}if(xhr!=null)xhr.abort();removeMarkers();locations=[];var form=$("#searchForm").submit();xhr=form.data("jqxhr")}$("#offreList").scroll($.debounce(addMore,500));$(document).on("click",".save",function(){$("#globModal").modal("show")});function addMore(){if($(this).scrollTop()+$(this).innerHeight()==$(this)[0].scrollHeight){if(!(is_processing&&last_page)){$("#offreList").off("scroll");$("#offreList").append("<div class='loader'></div>").scrollTop($(this)[0].scrollHeight);first=false;add_more=true;is_processing=true;var currOffset=parseInt($("#offset").val());var limit=parseInt($("#limit").val());$("#offset").val(currOffset+limit);if(xhr!=null)xhr.abort();var form=$("#searchForm").submit();xhr=form.data("jqxhr")}}}function loadCards(){var cartWrapper=$(".cd-cart-container");var productId=0;if(cartWrapper.length>0){var cartBody=cartWrapper.find(".body");var cartList=cartBody.find("ul").eq(0);var cartTotal=cartWrapper.find(".checkout").find("span");var cartTrigger=cartWrapper.children(".cd-cart-trigger");var cartCount=cartTrigger.children(".count");var addToCartBtn=$(".cd-add-to-cart");var undo=cartWrapper.find(".undo");var undoTimeoutId;addToCartBtn.on("click",function(event){event.preventDefault();addToCart($(this));animate($(this))});cartTrigger.on("click",function(event){event.preventDefault();toggleCart(true)});cartWrapper.on("click",function(event){if($(event.target).is($(this)))toggleCart(true)});cartList.on("click",".delete-item",function(event){event.preventDefault();removeProduct($(event.target).parents(".product"))});cartList.on("change","select",function(event){quickUpdateCart()});undo.on("click","a",function(event){clearInterval(undoTimeoutId);event.preventDefault();cartList.find(".deleted").addClass("undo-deleted").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){$(this).off("webkitAnimationEnd oanimationend msAnimationEnd animationend").removeClass("deleted undo-deleted").removeAttr("style");quickUpdateCart()});undo.removeClass("visible")})}function toggleCart(bool){var cartIsOpen=typeof bool==="undefined"?cartWrapper.hasClass("cart-open"):bool;if(cartIsOpen){cartWrapper.removeClass("cart-open");clearInterval(undoTimeoutId);undo.removeClass("visible");cartList.find(".deleted").remove();setTimeout(function(){cartBody.scrollTop(0);cartWrapper.addClass("empty")},500)}else{cartWrapper.addClass("cart-open")}}function addToCart(trigger){var cartIsEmpty=cartWrapper.hasClass("empty");var _offreId=trigger.data("offre-id");addProduct(cartIsEmpty,_offreId).complete(function(){cartWrapper.removeClass("empty");trigger.replaceWith('<a href="#" class="btn-default btn-warning">Déja sauvegardée</a>');toggleCart(true)})}function animate(trigger){var imgtodrag=trigger;if(imgtodrag){var imgclone=imgtodrag.clone().offset({top:imgtodrag.offset().top,left:imgtodrag.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"100"}).appendTo($("body")).animate({top:cartTrigger.offset().top-150,left:cartTrigger.offset().left,width:75,height:75},3e3,"easeInOutExpo");setTimeout(function(){cartTrigger.effect("shake",{times:2},200)},1500);imgclone.animate({width:0,height:0},function(){$(this).detach()})}else{alert("not defined")}}function addProduct(cartIsEmpty,id){var xhr=$.ajax({url:Routing.generate("eco_job_candidat_offre_save_async",{id:id}),method:"GET"}).success(function(data){updateCartCount(cartIsEmpty,data.saved)}).error(function(err){console.warn(err)});return xhr}function removeProduct(product){clearInterval(undoTimeoutId);cartList.find(".deleted").remove();var topPosition=product.offset().top-cartBody.children("ul").offset().top,productQuantity=Number(product.find(".quantity").find("select").val()),productTotPrice=Number(product.find(".price").text().replace("$",""))*productQuantity;product.css("top",topPosition+"px").addClass("deleted");updateCartCount(true,-productQuantity);undo.addClass("visible");undoTimeoutId=setTimeout(function(){undo.removeClass("visible");cartList.find(".deleted").remove()},8e3)}function quickUpdateCart(){var quantity=0;var price=0;cartList.children("li:not(.deleted)").each(function(){var singleQuantity=Number($(this).find("select").val());quantity=quantity+singleQuantity;price=price+singleQuantity*Number($(this).find(".price").text().replace("$",""))});cartTotal.text(price.toFixed(2));cartCount.find("li").eq(0).text(quantity);cartCount.find("li").eq(1).text(quantity+1)}function updateCartCount(emptyCart,quantity){cartCount.find("li").eq(0).text(quantity);cartCount.find("li").eq(1).text(quantity)}}function loadNetworks(){var _url=window.location.href;window.fbAsyncInit=function(){FB.init({appId:"1750551898578027",xfbml:true,version:"v2.10"});FB.AppEvents.logPageView()};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk");$(".fb-share").click(function(e){e.preventDefault();var url="ecojob.fr/valfid/developpement/web"+$(this).attr("href");FB.ui({method:"share",display:"popup",href:url},function(response){});return false});$(".popup").click(function(event){var width=575,height=400,left=($(window).width()-width)/2,top=($(window).height()-height)/2,url=this.href,opts="status=1"+",width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"twitter",opts);return false});$("#candidatureForm").submit(function(event){event.preventDefault();var form_data=$(this).serialize();console.log(form_data);$.ajax({type:"POST",url:$(this).attr("action"),data:form_data,beforeSend:function(){$.blockUI({message:'<p class="loader"></p>',css:{border:"none",backgroundColor:"transparent",width:"66px",top:($(window).height()-100)/2+"px",left:($(window).width()-100)/2+"px"}})},error:function(err){$("#responseStore").addClass("alert-danger").html("L'envoie de votre candidature a échoué").show()},success:function(data){$("#responseStore").addClass("alert-success").html(data.message).show();$("#postulerBtn").replaceWith('<a href="#" class="btn-default btn-warning">Déja postulé</a>');$("#m-m-u").modal("hide")},complete:function(){$.unblockUI()}})})}});
function MarkerClusterer(map,opt_markers,opt_options){this.extend(MarkerClusterer,google.maps.OverlayView);this.map_=map;this.markers_=[];this.clusters_=[];this.sizes=[53,56,66,78,90];this.styles_=[];this.ready_=false;var options=opt_options||{};this.gridSize_=options["gridSize"]||60;this.minClusterSize_=options["minimumClusterSize"]||2;this.maxZoom_=options["maxZoom"]||null;this.styles_=options["styles"]||[];this.imagePath_=options["imagePath"]||this.MARKER_CLUSTER_IMAGE_PATH_;this.imageExtension_=options["imageExtension"]||this.MARKER_CLUSTER_IMAGE_EXTENSION_;this.zoomOnClick_=true;if(options["zoomOnClick"]!=undefined){this.zoomOnClick_=options["zoomOnClick"]}this.averageCenter_=false;if(options["averageCenter"]!=undefined){this.averageCenter_=options["averageCenter"]}this.setupStyles_();this.setMap(map);this.prevZoom_=this.map_.getZoom();var that=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var zoom=that.map_.getZoom();var minZoom=that.map_.minZoom||0;var maxZoom=Math.min(that.map_.maxZoom||100,that.map_.mapTypes[that.map_.getMapTypeId()].maxZoom);zoom=Math.min(Math.max(zoom,minZoom),maxZoom);if(that.prevZoom_!=zoom){that.prevZoom_=zoom;that.resetViewport()}});google.maps.event.addListener(this.map_,"idle",function(){that.redraw()});if(opt_markers&&(opt_markers.length||Object.keys(opt_markers).length)){this.addMarkers(opt_markers,false)}}MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m";MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png";MarkerClusterer.prototype.extend=function(obj1,obj2){return function(object){for(var property in object.prototype){this.prototype[property]=object.prototype[property]}return this}.apply(obj1,[obj2])};MarkerClusterer.prototype.onAdd=function(){this.setReady_(true)};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){if(this.styles_.length){return}for(var i=0,size;size=this.sizes[i];i++){this.styles_.push({url:this.imagePath_+(i+1)+"."+this.imageExtension_,height:size,width:size})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var markers=this.getMarkers();var bounds=new google.maps.LatLngBounds;for(var i=0,marker;marker=markers[i];i++){bounds.extend(marker.getPosition())}this.map_.fitBounds(bounds)};MarkerClusterer.prototype.setStyles=function(styles){this.styles_=styles};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.setMaxZoom=function(maxZoom){this.maxZoom_=maxZoom};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.calculator_=function(markers,numStyles){var index=0;var count=markers.length;var dv=count;while(dv!==0){dv=parseInt(dv/10,10);index++}index=Math.min(index,numStyles);return{text:count,index:index}};MarkerClusterer.prototype.setCalculator=function(calculator){this.calculator_=calculator};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.addMarkers=function(markers,opt_nodraw){if(markers.length){for(var i=0,marker;marker=markers[i];i++){this.pushMarkerTo_(marker)}}else if(Object.keys(markers).length){for(var marker in markers){this.pushMarkerTo_(markers[marker])}}if(!opt_nodraw){this.redraw()}};MarkerClusterer.prototype.pushMarkerTo_=function(marker){marker.isAdded=false;if(marker["draggable"]){var that=this;google.maps.event.addListener(marker,"dragend",function(){marker.isAdded=false;that.repaint()})}this.markers_.push(marker)};MarkerClusterer.prototype.addMarker=function(marker,opt_nodraw){this.pushMarkerTo_(marker);if(!opt_nodraw){this.redraw()}};MarkerClusterer.prototype.removeMarker_=function(marker){var index=-1;if(this.markers_.indexOf){index=this.markers_.indexOf(marker)}else{for(var i=0,m;m=this.markers_[i];i++){if(m==marker){index=i;break}}}if(index==-1){return false}marker.setMap(null);this.markers_.splice(index,1);return true};MarkerClusterer.prototype.removeMarker=function(marker,opt_nodraw){var removed=this.removeMarker_(marker);if(!opt_nodraw&&removed){this.resetViewport();this.redraw();return true}else{return false}};MarkerClusterer.prototype.removeMarkers=function(markers,opt_nodraw){var removed=false;for(var i=0,marker;marker=markers[i];i++){var r=this.removeMarker_(marker);removed=removed||r}if(!opt_nodraw&&removed){this.resetViewport();this.redraw();return true}};MarkerClusterer.prototype.setReady_=function(ready){if(!this.ready_){this.ready_=ready;this.createClusters_()}};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.getMap=function(){return this.map_};MarkerClusterer.prototype.setMap=function(map){this.map_=map};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(size){this.gridSize_=size};MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinClusterSize=function(size){this.minClusterSize_=size};MarkerClusterer.prototype.getExtendedBounds=function(bounds){var projection=this.getProjection();var tr=new google.maps.LatLng(bounds.getNorthEast().lat(),bounds.getNorthEast().lng());var bl=new google.maps.LatLng(bounds.getSouthWest().lat(),bounds.getSouthWest().lng());var trPix=projection.fromLatLngToDivPixel(tr);trPix.x+=this.gridSize_;trPix.y-=this.gridSize_;var blPix=projection.fromLatLngToDivPixel(bl);blPix.x-=this.gridSize_;blPix.y+=this.gridSize_;var ne=projection.fromDivPixelToLatLng(trPix);var sw=projection.fromDivPixelToLatLng(blPix);bounds.extend(ne);bounds.extend(sw);return bounds};MarkerClusterer.prototype.isMarkerInBounds_=function(marker,bounds){return bounds.contains(marker.getPosition())};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(true);this.markers_=[]};MarkerClusterer.prototype.resetViewport=function(opt_hide){for(var i=0,cluster;cluster=this.clusters_[i];i++){cluster.remove()}for(var i=0,marker;marker=this.markers_[i];i++){marker.isAdded=false;if(opt_hide){marker.setMap(null)}}this.clusters_=[]};MarkerClusterer.prototype.repaint=function(){var oldClusters=this.clusters_.slice();this.clusters_.length=0;this.resetViewport();this.redraw();window.setTimeout(function(){for(var i=0,cluster;cluster=oldClusters[i];i++){cluster.remove()}},0)};MarkerClusterer.prototype.redraw=function(){this.createClusters_()};MarkerClusterer.prototype.distanceBetweenPoints_=function(p1,p2){if(!p1||!p2){return 0}var R=6371;var dLat=(p2.lat()-p1.lat())*Math.PI/180;var dLon=(p2.lng()-p1.lng())*Math.PI/180;var a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(p1.lat()*Math.PI/180)*Math.cos(p2.lat()*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);var c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));var d=R*c;return d};MarkerClusterer.prototype.addToClosestCluster_=function(marker){var distance=4e4;var clusterToAddTo=null;var pos=marker.getPosition();for(var i=0,cluster;cluster=this.clusters_[i];i++){var center=cluster.getCenter();if(center){var d=this.distanceBetweenPoints_(center,marker.getPosition());if(d<distance){distance=d;clusterToAddTo=cluster}}}if(clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(marker)){clusterToAddTo.addMarker(marker)}else{var cluster=new Cluster(this);cluster.addMarker(marker);this.clusters_.push(cluster)}};MarkerClusterer.prototype.createClusters_=function(){if(!this.ready_){return}var mapBounds=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast());var bounds=this.getExtendedBounds(mapBounds);for(var i=0,marker;marker=this.markers_[i];i++){if(!marker.isAdded&&this.isMarkerInBounds_(marker,bounds)){this.addToClosestCluster_(marker)}}};function Cluster(markerClusterer){this.markerClusterer_=markerClusterer;this.map_=markerClusterer.getMap();this.gridSize_=markerClusterer.getGridSize();this.minClusterSize_=markerClusterer.getMinClusterSize();this.averageCenter_=markerClusterer.isAverageCenter();this.center_=null;this.markers_=[];this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,markerClusterer.getStyles(),markerClusterer.getGridSize())}Cluster.prototype.isMarkerAlreadyAdded=function(marker){if(this.markers_.indexOf){return this.markers_.indexOf(marker)!=-1}else{for(var i=0,m;m=this.markers_[i];i++){if(m==marker){return true}}}return false};Cluster.prototype.addMarker=function(marker){if(this.isMarkerAlreadyAdded(marker)){return false}if(!this.center_){this.center_=marker.getPosition();this.calculateBounds_()}else{if(this.averageCenter_){var l=this.markers_.length+1;var lat=(this.center_.lat()*(l-1)+marker.getPosition().lat())/l;var lng=(this.center_.lng()*(l-1)+marker.getPosition().lng())/l;this.center_=new google.maps.LatLng(lat,lng);this.calculateBounds_()}}marker.isAdded=true;this.markers_.push(marker);var len=this.markers_.length;if(len<this.minClusterSize_&&marker.getMap()!=this.map_){marker.setMap(this.map_)}if(len==this.minClusterSize_){for(var i=0;i<len;i++){this.markers_[i].setMap(null)}}if(len>=this.minClusterSize_){marker.setMap(null)}this.updateIcon();return true};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);var markers=this.getMarkers();for(var i=0,marker;marker=markers[i];i++){bounds.extend(marker.getPosition())}return bounds};Cluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_};Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.calculateBounds_=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(bounds)};Cluster.prototype.isMarkerInClusterBounds=function(marker){return this.bounds_.contains(marker.getPosition())};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.updateIcon=function(){var zoom=this.map_.getZoom();var mz=this.markerClusterer_.getMaxZoom();if(mz&&zoom>mz){for(var i=0,marker;marker=this.markers_[i];i++){marker.setMap(this.map_)}return}if(this.markers_.length<this.minClusterSize_){this.clusterIcon_.hide();return}var numStyles=this.markerClusterer_.getStyles().length;var sums=this.markerClusterer_.getCalculator()(this.markers_,numStyles);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(sums);this.clusterIcon_.show()};function ClusterIcon(cluster,styles,opt_padding){cluster.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.styles_=styles;this.padding_=opt_padding||0;this.cluster_=cluster;this.center_=null;this.map_=cluster.getMap();this.div_=null;this.sums_=null;this.visible_=false;this.setMap(this.map_)}ClusterIcon.prototype.triggerClusterClick=function(){var markerClusterer=this.cluster_.getMarkerClusterer();google.maps.event.trigger(markerClusterer,"clusterclick",this.cluster_);if(markerClusterer.isZoomOnClick()){this.map_.fitBounds(this.cluster_.getBounds())}};ClusterIcon.prototype.onAdd=function(){this.div_=document.createElement("DIV");if(this.visible_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos);this.div_.innerHTML=this.sums_.text}var panes=this.getPanes();panes.overlayMouseTarget.appendChild(this.div_);var that=this;google.maps.event.addDomListener(this.div_,"click",function(){that.triggerClusterClick()})};ClusterIcon.prototype.getPosFromLatLng_=function(latlng){var pos=this.getProjection().fromLatLngToDivPixel(latlng);pos.x-=parseInt(this.width_/2,10);pos.y-=parseInt(this.height_/2,10);return pos};ClusterIcon.prototype.draw=function(){if(this.visible_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.top=pos.y+"px";this.div_.style.left=pos.x+"px"}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display="none"}this.visible_=false};ClusterIcon.prototype.show=function(){if(this.div_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos);this.div_.style.display=""}this.visible_=true};ClusterIcon.prototype.remove=function(){this.setMap(null)};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();this.div_.parentNode.removeChild(this.div_);this.div_=null}};ClusterIcon.prototype.setSums=function(sums){this.sums_=sums;this.text_=sums.text;this.index_=sums.index;if(this.div_){this.div_.innerHTML=sums.text}this.useStyle()};ClusterIcon.prototype.useStyle=function(){var index=Math.max(0,this.sums_.index-1);index=Math.min(this.styles_.length-1,index);var style=this.styles_[index];this.url_=style["url"];this.height_=style["height"];this.width_=style["width"];this.textColor_=style["textColor"];this.anchor_=style["anchor"];this.textSize_=style["textSize"];this.backgroundPosition_=style["backgroundPosition"]};ClusterIcon.prototype.setCenter=function(center){this.center_=center};ClusterIcon.prototype.createCss=function(pos){var style=[];style.push("background-image:url("+this.url_+");");var backgroundPosition=this.backgroundPosition_?this.backgroundPosition_:"0 0";style.push("background-position:"+backgroundPosition+";");if(typeof this.anchor_==="object"){if(typeof this.anchor_[0]==="number"&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){style.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;")}else{style.push("height:"+this.height_+"px; line-height:"+this.height_+"px;")}if(typeof this.anchor_[1]==="number"&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){style.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;")}else{style.push("width:"+this.width_+"px; text-align:center;")}}else{style.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;")}var txtColor=this.textColor_?this.textColor_:"black";var txtSize=this.textSize_?this.textSize_:11;style.push("cursor:pointer; top:"+pos.y+"px; left:"+pos.x+"px; color:"+txtColor+"; position:absolute; font-size:"+txtSize+"px; font-family:Arial,sans-serif; font-weight:bold");return style.join("")};
$(function(){var _url=window.location.href;window.fbAsyncInit=function(){FB.init({appId:"1750551898578027",xfbml:true,version:"v2.10"});FB.AppEvents.logPageView()};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk");$(".fb-share").click(function(e){e.preventDefault();var url="ecojob.fr/valfid/developpement/web"+$(this).attr("href");FB.ui({method:"share",display:"popup",href:url},function(response){});return false});$(".popup").click(function(event){var width=575,height=400,left=($(window).width()-width)/2,top=($(window).height()-height)/2,url=this.href,opts="status=1"+",width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"twitter",opts);return false});$("#candidatureForm").submit(function(event){event.preventDefault();var form_data=$(this).serialize();console.log(form_data);$.ajax({type:"POST",url:$(this).attr("action"),data:form_data,beforeSend:function(){$.blockUI({message:'<p class="loader"></p>',css:{border:"none",backgroundColor:"transparent",width:"66px",top:($(window).height()-100)/2+"px",left:($(window).width()-100)/2+"px"}})},error:function(err){$("#responseStore").addClass("alert-danger").html("L'envoie de votre candidature a échoué").show()},success:function(data){$("#responseStore").addClass("alert-success").html(data.message).show();$("#postulerBtn").replaceWith('<a href="#" class="btn-default btn-warning">Déja postulé</a>');$("#m-m-u").modal("hide")},complete:function(){$.unblockUI()}})})});
jQuery(document).ready(function($){var cartWrapper=$(".cd-cart-container");var productId=0;if(cartWrapper.length>0){var cartBody=cartWrapper.find(".body");var cartList=cartBody.find("ul").eq(0);var cartTotal=cartWrapper.find(".checkout").find("span");var cartTrigger=cartWrapper.children(".cd-cart-trigger");var cartCount=cartTrigger.children(".count");var addToCartBtn=$(".cd-add-to-cart");var undo=cartWrapper.find(".undo");var undoTimeoutId;$(document).on("click",".cd-add-to-cart",function(event){event.preventDefault();addToCart($(this));animate($(this))});cartTrigger.on("click",function(event){event.preventDefault();toggleCart(true)});cartWrapper.on("click",function(event){if($(event.target).is($(this)))toggleCart(true)});cartList.on("click",".delete-item",function(event){event.preventDefault();removeProduct($(event.target).parents(".product"))});cartList.on("change","select",function(event){quickUpdateCart()});undo.on("click","a",function(event){clearInterval(undoTimeoutId);event.preventDefault();cartList.find(".deleted").addClass("undo-deleted").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){$(this).off("webkitAnimationEnd oanimationend msAnimationEnd animationend").removeClass("deleted undo-deleted").removeAttr("style");quickUpdateCart()});undo.removeClass("visible")})}function toggleCart(bool){var cartIsOpen=typeof bool==="undefined"?cartWrapper.hasClass("cart-open"):bool;if(cartIsOpen){cartWrapper.removeClass("cart-open");clearInterval(undoTimeoutId);undo.removeClass("visible");cartList.find(".deleted").remove();setTimeout(function(){cartBody.scrollTop(0);cartWrapper.addClass("empty")},500)}else{cartWrapper.addClass("cart-open")}}function addToCart(trigger){var cartIsEmpty=cartWrapper.hasClass("empty");var _offreId=trigger.data("offre-id");addProduct(cartIsEmpty,_offreId).complete(function(){cartWrapper.removeClass("empty");toggleCart(true)})}function animate(trigger){var imgtodrag=trigger;if(imgtodrag){var imgclone=imgtodrag.clone().offset({top:imgtodrag.offset().top,left:imgtodrag.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"100"}).appendTo($("body")).animate({top:cartTrigger.offset().top-150,left:cartTrigger.offset().left,width:75,height:75},3e3,"easeInOutExpo");imgclone.animate({width:0,height:0},function(){$(this).detach()})}else{alert("not defined")}}function addProduct(cartIsEmpty,id){var xhr=$.ajax({url:Routing.generate("eco_job_candidat_offre_save_async",{id:id}),method:"GET"}).success(function(data){$(".cd-add-to-cart[data-offre-id="+id+"]").replaceWith('<a href="#" class="btn-default btn-warning">Déja sauvegardée</a>');updateCartCount(cartIsEmpty,data.saved)}).error(function(err){console.warn(err)});return xhr}function removeProduct(product){clearInterval(undoTimeoutId);cartList.find(".deleted").remove();var topPosition=product.offset().top-cartBody.children("ul").offset().top,productQuantity=Number(product.find(".quantity").find("select").val()),productTotPrice=Number(product.find(".price").text().replace("$",""))*productQuantity;product.css("top",topPosition+"px").addClass("deleted");updateCartCount(true,-productQuantity);undo.addClass("visible");undoTimeoutId=setTimeout(function(){undo.removeClass("visible");cartList.find(".deleted").remove()},8e3)}function quickUpdateCart(){var quantity=0;var price=0;cartList.children("li:not(.deleted)").each(function(){var singleQuantity=Number($(this).find("select").val());quantity=quantity+singleQuantity;price=price+singleQuantity*Number($(this).find(".price").text().replace("$",""))});cartTotal.text(price.toFixed(2));cartCount.find("li").eq(0).text(quantity);cartCount.find("li").eq(1).text(quantity+1)}function updateCartCount(emptyCart,quantity){cartCount.find("li").eq(0).text(quantity);cartCount.find("li").eq(1).text(quantity)}});
jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return t==0?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=1.525)+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<1/2.75){return c*(7.5625*t*t)+b}else if(t<2/2.75){return c*(7.5625*(t-=1.5/2.75)*t+.75)+b}else if(t<2.5/2.75){return c*(7.5625*(t-=2.25/2.75)*t+.9375)+b}else{return c*(7.5625*(t-=2.625/2.75)*t+.984375)+b}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b}});
$(function(){$(document).on("submit","#candidatureForm",function(event){event.preventDefault();var form_data=$(this).serialize();console.log(form_data);$.ajax({type:"POST",url:$(this).attr("action"),data:form_data,beforeSend:function(){$.blockUI({message:'<p class="loader"></p>',css:{border:"none",backgroundColor:"transparent",width:"66px",top:($(window).height()-100)/2+"px",left:($(window).width()-100)/2+"px"}})},error:function(err){$("#responseStore").addClass("alert-danger").html("L'envoie de votre candidature a échoué").show()},success:function(data){$("#responseStore").addClass("alert-success").html(data.message).show();$("#postulerBtn").replaceWith('<a href="#" class="btn-default btn-warning">Déja postulé</a>');$("#m-m-u").modal("hide")},complete:function(){$.unblockUI()}})})});